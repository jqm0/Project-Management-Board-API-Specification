<!DOCTYPE html>
<html>
<head>
    <title>Project Management Board</title>
    <!-- Add the Bootstrap CSS link below -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="styles.css">
</head>
<body>
    <header>
        <div class="header-left">
            <h1 id="displayTitle">Project Management Board</h1>
        </div>
        <div class="header-right">
            <input type="text" placeholder="Enter Title Here" id="titleInput">
            <button onclick="setTitle()">SET</button>
        </div>
    </header>

    <div class="container mt-5">
        <table class="table table-bordered text-center project-table">
            <tr>
                <th>TODO</th>
                <th>In Progress</th>
                <th>Done</th>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
            </tr>
        </table>
    </div>

    <div class="container mt-5">
        <div class="row">
            <!-- Section 1 - "Create" button -->
            <div class="col-md-4">
                <div class="row">
                    <div class="col-md-12 mb-3">
                        <input type="text" class="form-control" placeholder="Enter Card Title Here" id="createCardTitleInput">
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12 mb-3">
                        <input type="text" class="form-control" placeholder="Enter Card Desc Here" id="createCardDescInput">
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12 mb-3">
                        <select class="form-control" id="createCategorySelect">
                            <option selected disabled>Select Category</option>
                            <option>TODO</option>
                            <option>In Progress</option>
                            <option>Done</option>
                        </select>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <button class="btn btn-primary btn-block" onclick="createCard()">Create</button>
                    </div>
                </div>
            </div>
            <!-- End of Section 1 -->

            <!-- Section 2 - "Update" button -->
            <div class="col-md-4">
                <div class="row">
                    <div class="col-md-12 mb-3">
                        <select class="form-control" id="anotherSelectID2">
                            <option selected disabled>Select ID From Here</option>
                            <!-- JavaScript will add options here -->
                        </select>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12 mb-3">
                        <input type="text" class="form-control" placeholder="Enter Card Title Here" id="updateCardTitleInput">
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12 mb-3">
                        <input type="text" class="form-control" placeholder="Enter Card Desc Here" id="updateCardDescInput">
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12 mb-3">
                        <select class="form-control" id="updateCategorySelect">
                            <option selected disabled>Select Category</option>
                            <option>TODO</option>
                            <option>In Progress</option>
                            <option>Done</option>
                        </select>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <button class="btn btn-success btn-block" onclick="updateCard()">Update</button>
                    </div>
                </div>
            </div>
            <!-- End of Section 2 -->

            <!-- Section 3 - "Select ID" dropdown and "Delete" button -->
            <div class="col-md-4">
                <div class="row">
                    <div class="col-md-12 mb-3">
                        <select class="form-control" id="anotherSelectID">
                            <option selected disabled>Select ID From Here</option>
                            <!-- JavaScript will add options here -->
                        </select>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <button class="btn btn-danger btn-block" onclick="deleteCard()">Delete</button>
                    </div>
                </div>
            </div>
            <!-- End of Section 3 -->
        </div>
    </div>

 <script>
    // Function to create a new card and display it in the table
    function createCard() {
        // Get the card details from the input fields
        var title = document.getElementById("createCardTitleInput").value;
        var desc = document.getElementById("createCardDescInput").value;
        var category = document.getElementById("createCategorySelect").value;

        // Create a new table row and cells to hold the card details
        var table = document.querySelector(".project-table");
        var newRow = document.createElement("tr");
        var newCell = document.createElement("td");

        // Set the card details as the cell content
        newCell.innerHTML = "Card Title: " + title + "<br>Card Description: " + desc;
        newRow.appendChild(newCell);

        // Determine the category and update the rowIndex accordingly
        var rowIndex = 0; // Default rowIndex for "TODO"
        if (category === "In Progress") {
            rowIndex = 1;
        } else if (category === "Done") {
            rowIndex = 2;
        }

        // Append the new card to the correct column
        var columns = table.rows[0].cells;
        columns[rowIndex].appendChild(newRow);

        // Clear the input fields
        document.getElementById("createCardTitleInput").value = "";
        document.getElementById("createCardDescInput").value = "";
        document.getElementById("createCategorySelect").selectedIndex = 0;

        // Update the "Select ID" dropdown with the new card ID
        var selectIDDropdown = document.getElementById("anotherSelectID");
        var option = document.createElement("option");
        option.text = "Card " + (rowIndex * 3 + columns[rowIndex].childElementCount);
        selectIDDropdown.add(option);
    }
	function populateUpdateDropdown() {
            var table = document.querySelector(".project-table");
            var selectIDDropdown = document.getElementById("createCardSelectID");
            var updateSelectIDDropdown = document.getElementById("anotherSelectID");

            // Clear existing options in both dropdowns
            selectIDDropdown.innerHTML = '<option selected disabled>Select ID From Here</option>';
            updateSelectIDDropdown.innerHTML = '<option selected disabled>Select ID From Here</option>';

            // Loop through all cards and add their IDs to the dropdowns
            var rowCount = table.rows.length;
            for (var i = 1; i < rowCount; i++) {
                var cardID = table.rows[i].querySelector("b").innerText;
                var option = document.createElement("option");
                option.text = cardID;
                selectIDDropdown.add(option.cloneNode(true));
                updateSelectIDDropdown.add(option.cloneNode(true));
            }
        }
    // Call the function to populate the dropdown initially
    populateUpdateDropdown();
	function updateCard() {
        // Get the selected card ID from the dropdown
        var selectedID = document.getElementById("updateCardSelectID").value;

        // Get the updated card details from the input fields
        var updatedTitle = document.getElementById("updateCardTitleInput").value;
        var updatedDesc = document.getElementById("updateCardDescInput").value;
        var updatedCategory = document.getElementById("updateCategorySelect").value;

        // Find the table and loop through all rows to find the card with the selected ID
        var table = document.querySelector(".project-table");
        var rowCount = table.rows.length;
        for (var i = 1; i < rowCount; i++) {
            var cardID = table.rows[i].querySelector("b").innerText;

            // If the card ID matches the selected ID, update the card details
            if (cardID === selectedID) {
                // Update the card title and description
                var cardTitle = table.rows[i].querySelector(".card-title");
                cardTitle.innerText = "Card Title: " + updatedTitle;

                var cardDesc = table.rows[i].querySelector(".card-desc");
                cardDesc.innerText = "Card Description: " + updatedDesc;

                // Move the card to the correct column based on the updated category
                var targetColumnIndex = 0;
                if (updatedCategory === "In Progress") {
                    targetColumnIndex = 1;
                } else if (updatedCategory === "Done") {
                    targetColumnIndex = 2;
                }

                // Move the card to the correct column and remove any empty cells from the row
                var cell = table.rows[i].insertCell(targetColumnIndex);
                cell.appendChild(cardTitle);
                cell.appendChild(document.createElement("br"));
                cell.appendChild(cardDesc);

                table.rows[i].deleteCell(targetColumnIndex + 1);

                // Clear the input fields in the "Update" section
                document.getElementById("updateCardTitleInput").value = "";
                document.getElementById("updateCardDescInput").value = "";
                document.getElementById("updateCategorySelect").selectedIndex = 0;

                // Update the "Select ID" dropdowns
                populateUpdateDropdown();

                // Exit the loop as we have found and updated the card
                break;
            }
        }
    }
</script>

    <script src="script.js"></script>

</body>
</html>
